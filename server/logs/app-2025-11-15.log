{"timestamp":"2025-11-15T01:08:20.453Z","level":"info","message":"Initializing NASA System 6 database schema..."}
{"timestamp":"2025-11-15T01:08:20.470Z","level":"info","message":"Attempting to connect to database","attempt":1,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:20.541Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":1,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:20.543Z","level":"info","message":"Retrying database connection in 1000ms"}
{"timestamp":"2025-11-15T01:08:20.595Z","level":"info","message":"Initializing NASA System 6 database schema..."}
{"timestamp":"2025-11-15T01:08:20.610Z","level":"info","message":"Attempting to connect to database","attempt":1,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:20.624Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":1,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:20.625Z","level":"info","message":"Retrying database connection in 1000ms"}
{"timestamp":"2025-11-15T01:08:21.544Z","level":"info","message":"Attempting to connect to database","attempt":2,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:21.556Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":2,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:21.558Z","level":"info","message":"Retrying database connection in 2000ms"}
{"timestamp":"2025-11-15T01:08:21.627Z","level":"info","message":"Attempting to connect to database","attempt":2,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:21.636Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":2,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:21.638Z","level":"info","message":"Retrying database connection in 2000ms"}
{"timestamp":"2025-11-15T01:08:23.559Z","level":"info","message":"Attempting to connect to database","attempt":3,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:23.566Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":3,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:23.567Z","level":"info","message":"Retrying database connection in 4000ms"}
{"timestamp":"2025-11-15T01:08:23.640Z","level":"info","message":"Attempting to connect to database","attempt":3,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:23.644Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":3,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:23.645Z","level":"info","message":"Retrying database connection in 4000ms"}
{"timestamp":"2025-11-15T01:08:27.569Z","level":"info","message":"Attempting to connect to database","attempt":4,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:27.581Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":4,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:27.584Z","level":"info","message":"Retrying database connection in 8000ms"}
{"timestamp":"2025-11-15T01:08:27.647Z","level":"info","message":"Attempting to connect to database","attempt":4,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:27.659Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":4,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:27.662Z","level":"info","message":"Retrying database connection in 8000ms"}
{"timestamp":"2025-11-15T01:08:35.587Z","level":"info","message":"Attempting to connect to database","attempt":5,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:35.597Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":5,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:35.599Z","level":"error","message":"Maximum database connection attempts reached"}
{"timestamp":"2025-11-15T01:08:35.610Z","level":"error","message":"❌ Database initialization failed","error":"Unable to establish database connection after multiple attempts","stack":"DatabaseError: Unable to establish database connection after multiple attempts\n    at initializeConnection (/Users/edsaga/stylesnprofiles/server/db.js:137:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at initDb (/Users/edsaga/stylesnprofiles/server/db.js:397:5)\n    at Object.<anonymous> (/Users/edsaga/stylesnprofiles/server/__tests__/db.integration.test.js:14:7)"}
{"timestamp":"2025-11-15T01:08:35.664Z","level":"info","message":"Attempting to connect to database","attempt":5,"maxAttempts":5,"host":"localhost","database":"test_db"}
{"timestamp":"2025-11-15T01:08:35.671Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"test_user\"","attempt":5,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:35.672Z","level":"error","message":"Maximum database connection attempts reached"}
{"timestamp":"2025-11-15T01:08:35.676Z","level":"error","message":"❌ Database initialization failed","error":"Unable to establish database connection after multiple attempts","stack":"DatabaseError: Unable to establish database connection after multiple attempts\n    at initializeConnection (/Users/edsaga/stylesnprofiles/server/db.js:137:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at initDb (/Users/edsaga/stylesnprofiles/server/db.js:397:5)\n    at Object.<anonymous> (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:39:7)"}
{"timestamp":"2025-11-15T01:08:35.691Z","level":"info","message":"Fetching saved items","requestId":"test-1763168915691-3dp7jw0t2","limit":20,"offset":0}
{"timestamp":"2025-11-15T01:08:35.703Z","level":"error","message":"Error fetching saved items","requestId":"test-1763168915691-3dp7jw0t2","error":"Database not available. Please try again later.","code":"DATABASE_ERROR","stack":"DatabaseError: Database not available. Please try again later.\n    at query (/Users/edsaga/stylesnprofiles/server/db.js:230:11)\n    at query (/Users/edsaga/stylesnprofiles/server/routes/resourceNavigator.js:131:9)\n    at fn (/Users/edsaga/stylesnprofiles/server/middleware/errorHandler.js:537:21)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:23:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/edsaga/stylesnprofiles/server/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at app.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:508:28)\n    at parserOnIncoming (node:_http_server:1212:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:123:17)"}
{"timestamp":"2025-11-15T01:08:35.714Z","level":"info","message":"Saving new item","requestId":"test-1763168915711-h4uz37uy5","id":"test-1763168915705","type":"APOD","title":"Test Astronomy Picture","url":"provided"}
{"timestamp":"2025-11-15T01:08:35.715Z","level":"error","message":"Error saving item","requestId":"test-1763168915711-h4uz37uy5","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-1763168915705"}
{"timestamp":"2025-11-15T01:08:35.719Z","level":"info","message":"Saving new item","requestId":"test-1763168915718-wjwdb8ddb","id":"test-duplicate-1763168915717","type":"APOD","title":"Test Duplicate Item","url":"provided"}
{"timestamp":"2025-11-15T01:08:35.720Z","level":"error","message":"Error saving item","requestId":"test-1763168915718-wjwdb8ddb","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-duplicate-1763168915717"}
{"timestamp":"2025-11-15T01:08:35.723Z","level":"info","message":"Saving search query","requestId":"test-1763168915722-2xmwpwx2m","queryLength":25,"query":"test search 1763168915721"}
{"timestamp":"2025-11-15T01:08:35.723Z","level":"error","message":"Error saving search query","requestId":"test-1763168915722-2xmwpwx2m","error":"Database not available for transactions","code":"DATABASE_ERROR","queryLength":25}
{"timestamp":"2025-11-15T01:08:35.726Z","level":"info","message":"Saving new item","requestId":"test-1763168915726-bs083v17l","id":"test-retrieve-1763168915725","type":"MARS","title":"Test Mars Image","url":"provided"}
{"timestamp":"2025-11-15T01:08:35.727Z","level":"error","message":"Error saving item","requestId":"test-1763168915726-bs083v17l","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-retrieve-1763168915725"}
{"timestamp":"2025-11-15T01:08:35.729Z","level":"info","message":"Fetching saved items","requestId":"test-1763168915729-7fsn4v28v","limit":20,"offset":0,"type":"APOD"}
{"timestamp":"2025-11-15T01:08:35.732Z","level":"error","message":"Error fetching saved items","requestId":"test-1763168915729-7fsn4v28v","error":"Database not available. Please try again later.","code":"DATABASE_ERROR","stack":"DatabaseError: Database not available. Please try again later.\n    at query (/Users/edsaga/stylesnprofiles/server/db.js:230:11)\n    at query (/Users/edsaga/stylesnprofiles/server/routes/resourceNavigator.js:131:9)\n    at fn (/Users/edsaga/stylesnprofiles/server/middleware/errorHandler.js:537:21)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:23:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/edsaga/stylesnprofiles/server/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at app.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:508:28)\n    at parserOnIncoming (node:_http_server:1212:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:123:17)"}
{"timestamp":"2025-11-15T01:08:35.744Z","level":"debug","message":"NASA API request validated","requestId":"test-1763168915742-98p9tinng","endpointPath":"/planetary/apod","paramCount":0}
{"timestamp":"2025-11-15T01:08:35.746Z","level":"info","message":"NASA API proxy request","requestId":"test-1763168915742-98p9tinng","endpointPath":"/planetary/apod","paramCount":1}
{"timestamp":"2025-11-15T01:08:36.660Z","level":"info","message":"NASA API proxy response","requestId":"test-1763168915742-98p9tinng","endpointPath":"/planetary/apod","status":200,"dataSize":1037,"responseTime":"unknown"}
{"timestamp":"2025-11-15T01:08:36.666Z","level":"debug","message":"NASA API request validated","requestId":"test-1763168916665-xuzuahnvh","endpointPath":"/planetary/apod","paramCount":0}
{"timestamp":"2025-11-15T01:08:36.667Z","level":"info","message":"NASA API proxy request","requestId":"test-1763168916665-xuzuahnvh","endpointPath":"/planetary/apod","paramCount":1}
{"timestamp":"2025-11-15T01:08:36.941Z","level":"info","message":"NASA API proxy response","requestId":"test-1763168916665-xuzuahnvh","endpointPath":"/planetary/apod","status":200,"dataSize":1037,"responseTime":"unknown"}
{"timestamp":"2025-11-15T01:08:52.116Z","level":"info","message":"Initializing NASA System 6 database schema..."}
{"timestamp":"2025-11-15T01:08:52.133Z","level":"info","message":"Attempting to connect to database","attempt":1,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:52.156Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":1,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:52.158Z","level":"info","message":"Retrying database connection in 1000ms"}
{"timestamp":"2025-11-15T01:08:52.253Z","level":"info","message":"Initializing NASA System 6 database schema..."}
{"timestamp":"2025-11-15T01:08:52.269Z","level":"info","message":"Attempting to connect to database","attempt":1,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:52.283Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":1,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:52.285Z","level":"info","message":"Retrying database connection in 1000ms"}
{"timestamp":"2025-11-15T01:08:53.160Z","level":"info","message":"Attempting to connect to database","attempt":2,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:53.167Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":2,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:53.169Z","level":"info","message":"Retrying database connection in 2000ms"}
{"timestamp":"2025-11-15T01:08:53.286Z","level":"info","message":"Attempting to connect to database","attempt":2,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:53.293Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":2,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:53.294Z","level":"info","message":"Retrying database connection in 2000ms"}
{"timestamp":"2025-11-15T01:08:55.170Z","level":"info","message":"Attempting to connect to database","attempt":3,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:55.180Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":3,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:55.182Z","level":"info","message":"Retrying database connection in 4000ms"}
{"timestamp":"2025-11-15T01:08:55.296Z","level":"info","message":"Attempting to connect to database","attempt":3,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:55.305Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":3,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:55.307Z","level":"info","message":"Retrying database connection in 4000ms"}
{"timestamp":"2025-11-15T01:08:59.182Z","level":"info","message":"Attempting to connect to database","attempt":4,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:59.192Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":4,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:59.193Z","level":"info","message":"Retrying database connection in 8000ms"}
{"timestamp":"2025-11-15T01:08:59.307Z","level":"info","message":"Attempting to connect to database","attempt":4,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:08:59.317Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":4,"maxAttempts":5}
{"timestamp":"2025-11-15T01:08:59.318Z","level":"info","message":"Retrying database connection in 8000ms"}
{"timestamp":"2025-11-15T01:09:07.193Z","level":"info","message":"Attempting to connect to database","attempt":5,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:09:07.201Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":5,"maxAttempts":5}
{"timestamp":"2025-11-15T01:09:07.202Z","level":"error","message":"Maximum database connection attempts reached"}
{"timestamp":"2025-11-15T01:09:07.210Z","level":"error","message":"❌ Database initialization failed","error":"Unable to establish database connection after multiple attempts","stack":"DatabaseError: Unable to establish database connection after multiple attempts\n    at initializeConnection (/Users/edsaga/stylesnprofiles/server/db.js:137:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at initDb (/Users/edsaga/stylesnprofiles/server/db.js:397:5)\n    at Object.<anonymous> (/Users/edsaga/stylesnprofiles/server/__tests__/db.integration.test.js:14:7)"}
{"timestamp":"2025-11-15T01:09:07.318Z","level":"info","message":"Attempting to connect to database","attempt":5,"maxAttempts":5,"host":"localhost","database":"nasa_system6_portal"}
{"timestamp":"2025-11-15T01:09:07.326Z","level":"error","message":"Database connection failed","error":"password authentication failed for user \"postgres\"","attempt":5,"maxAttempts":5}
{"timestamp":"2025-11-15T01:09:07.328Z","level":"error","message":"Maximum database connection attempts reached"}
{"timestamp":"2025-11-15T01:09:07.336Z","level":"error","message":"❌ Database initialization failed","error":"Unable to establish database connection after multiple attempts","stack":"DatabaseError: Unable to establish database connection after multiple attempts\n    at initializeConnection (/Users/edsaga/stylesnprofiles/server/db.js:137:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at initDb (/Users/edsaga/stylesnprofiles/server/db.js:397:5)\n    at Object.<anonymous> (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:39:7)"}
{"timestamp":"2025-11-15T01:09:07.353Z","level":"info","message":"Fetching saved items","requestId":"test-1763168947353-vlopf6ccf","limit":20,"offset":0}
{"timestamp":"2025-11-15T01:09:07.367Z","level":"error","message":"Error fetching saved items","requestId":"test-1763168947353-vlopf6ccf","error":"Database not available. Please try again later.","code":"DATABASE_ERROR","stack":"DatabaseError: Database not available. Please try again later.\n    at query (/Users/edsaga/stylesnprofiles/server/db.js:230:11)\n    at query (/Users/edsaga/stylesnprofiles/server/routes/resourceNavigator.js:131:9)\n    at fn (/Users/edsaga/stylesnprofiles/server/middleware/errorHandler.js:537:21)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:23:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/edsaga/stylesnprofiles/server/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at app.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:508:28)\n    at parserOnIncoming (node:_http_server:1212:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:123:17)"}
{"timestamp":"2025-11-15T01:09:07.380Z","level":"info","message":"Saving new item","requestId":"test-1763168947377-n17jmpbro","id":"test-1763168947370","type":"APOD","title":"Test Astronomy Picture","url":"provided"}
{"timestamp":"2025-11-15T01:09:07.382Z","level":"error","message":"Error saving item","requestId":"test-1763168947377-n17jmpbro","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-1763168947370"}
{"timestamp":"2025-11-15T01:09:07.385Z","level":"info","message":"Saving new item","requestId":"test-1763168947384-057sbguo5","id":"test-duplicate-1763168947383","type":"APOD","title":"Test Duplicate Item","url":"provided"}
{"timestamp":"2025-11-15T01:09:07.386Z","level":"error","message":"Error saving item","requestId":"test-1763168947384-057sbguo5","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-duplicate-1763168947383"}
{"timestamp":"2025-11-15T01:09:07.389Z","level":"info","message":"Saving search query","requestId":"test-1763168947389-2zepqv0zt","queryLength":25,"query":"test search 1763168947388"}
{"timestamp":"2025-11-15T01:09:07.390Z","level":"error","message":"Error saving search query","requestId":"test-1763168947389-2zepqv0zt","error":"Database not available for transactions","code":"DATABASE_ERROR","queryLength":25}
{"timestamp":"2025-11-15T01:09:07.393Z","level":"info","message":"Saving new item","requestId":"test-1763168947392-11ig1q8t1","id":"test-retrieve-1763168947391","type":"MARS","title":"Test Mars Image","url":"provided"}
{"timestamp":"2025-11-15T01:09:07.394Z","level":"error","message":"Error saving item","requestId":"test-1763168947392-11ig1q8t1","error":"Database not available for transactions","code":"DATABASE_ERROR","itemId":"test-retrieve-1763168947391"}
{"timestamp":"2025-11-15T01:09:07.399Z","level":"info","message":"Fetching saved items","requestId":"test-1763168947399-3s6pcqjzi","limit":20,"offset":0,"type":"APOD"}
{"timestamp":"2025-11-15T01:09:07.401Z","level":"error","message":"Error fetching saved items","requestId":"test-1763168947399-3s6pcqjzi","error":"Database not available. Please try again later.","code":"DATABASE_ERROR","stack":"DatabaseError: Database not available. Please try again later.\n    at query (/Users/edsaga/stylesnprofiles/server/db.js:230:11)\n    at query (/Users/edsaga/stylesnprofiles/server/routes/resourceNavigator.js:131:9)\n    at fn (/Users/edsaga/stylesnprofiles/server/middleware/errorHandler.js:537:21)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/edsaga/stylesnprofiles/server/__tests__/api.integration.test.js:23:3)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/edsaga/stylesnprofiles/server/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:328:13)\n    at /Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:286:9\n    at router.process_params (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:280:10)\n    at router.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/router/index.js:175:3)\n    at app.handle (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/edsaga/stylesnprofiles/server/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:508:28)\n    at parserOnIncoming (node:_http_server:1212:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:123:17)"}
{"timestamp":"2025-11-15T01:09:07.411Z","level":"debug","message":"NASA API request validated","requestId":"test-1763168947409-z7z5vb4fg","endpointPath":"/planetary/apod","paramCount":0}
{"timestamp":"2025-11-15T01:09:07.414Z","level":"info","message":"NASA API proxy request","requestId":"test-1763168947409-z7z5vb4fg","endpointPath":"/planetary/apod","paramCount":1}
{"timestamp":"2025-11-15T01:09:07.986Z","level":"info","message":"NASA API proxy response","requestId":"test-1763168947409-z7z5vb4fg","endpointPath":"/planetary/apod","status":200,"dataSize":1037,"responseTime":"unknown"}
{"timestamp":"2025-11-15T01:09:07.990Z","level":"debug","message":"NASA API request validated","requestId":"test-1763168947990-c6kfrzfpy","endpointPath":"/planetary/apod","paramCount":0}
{"timestamp":"2025-11-15T01:09:07.991Z","level":"info","message":"NASA API proxy request","requestId":"test-1763168947990-c6kfrzfpy","endpointPath":"/planetary/apod","paramCount":1}
{"timestamp":"2025-11-15T01:09:08.625Z","level":"info","message":"NASA API proxy response","requestId":"test-1763168947990-c6kfrzfpy","endpointPath":"/planetary/apod","status":200,"dataSize":1037,"responseTime":"unknown"}
{"timestamp":"2025-11-15T02:36:35.806Z","level":"debug","message":"NASA API request validated","requestId":"6673f921-afd5-4fb6-a7af-1d8d3a522e1c","endpointPath":"/planetary/apod","paramCount":0}
{"timestamp":"2025-11-15T02:36:35.806Z","level":"info","message":"NASA API proxy request","requestId":"6673f921-afd5-4fb6-a7af-1d8d3a522e1c","endpointPath":"/planetary/apod","paramCount":1}
{"timestamp":"2025-11-15T02:36:36.393Z","level":"error","message":"NASA API proxy error","requestId":"6673f921-afd5-4fb6-a7af-1d8d3a522e1c","endpointPath":"/planetary/apod","error":"Request failed with status code 429","code":"ERR_BAD_REQUEST","statusCode":429,"circuitBreakerState":{"state":"CLOSED","failureCount":1,"lastFailureTime":1763174196393,"nextAttempt":null}}
{"timestamp":"2025-11-15T02:36:36.394Z","level":"debug","message":"NASA API error response","requestId":"6673f921-afd5-4fb6-a7af-1d8d3a522e1c","status":429,"data":{"error":{"code":"OVER_RATE_LIMIT","message":"You have exceeded your rate limit. Try again later or contact us at https://api.nasa.gov:443/contact/ for assistance"}}}
